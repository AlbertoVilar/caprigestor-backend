# Test profile configuration for PostgreSQL via Testcontainers

# spring.datasource.driver-class-name=org.postgresql.Driver
# spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.default_schema=public
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.jpa.open-in-view=false

spring.flyway.enabled=false
spring.flyway.baseline-on-migrate=true
# classpath:db/migration cobre SQL em src/main/resources/db/migration
# e Java migrations no package db.migration (src/main/java/db/migration)
spring.flyway.locations=classpath:db/migration
spring.flyway.schemas=public

spring.sql.init.mode=never

# Logging for easier debugging in tests
logging.level.org.springframework=INFO

# RSA Keys for JWT
jwt.public.key=classpath:app.pub
jwt.private.key=classpath:app.key

logging.level.com.devmaster.goatfarm=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.root=INFO

# Harden error responses in tests
server.error.include-message=never
server.error.include-binding-errors=never
server.error.include-stacktrace=never

spring.rabbitmq.listener.simple.auto-startup=false
spring.rabbitmq.listener.direct.auto-startup=false
caprigestor.rabbitmq.queue=events-queue
